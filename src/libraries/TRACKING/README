
README TRACKING
Aug. 2, 2006  David Lawrence


At this point I am just trying to collect my thoughts on the details of how the charged particle tracking will work. I have started implementing some code for a general solution, but am now starting to lean towards a geometry specific solution.


This starts at the point of track fitting. We assume a set of starting parameters has already been obtained from the track finding.

Since track finding assumes a perfect helix and confines itself to the central region of the detector, it does not necessarily contain a complete list of hits for the track. Thus, the first thing that is done is that a reference trajectory(RT) is swum through the inhomogeneous field. Distances of each of the hits from the RT are then calculated in order to determine the hits that will be used in the track fitting.

A Kalman filter method is used. In this method, the state vector is defined to have the following items: {momentum, theta, phi, x, z}. All of these are quantities describing the state of the particle relative to the RT reference frame. In other words, x and z are coordinates in the RT reference frame, and momentum, theta,and phi are the instantaneous values of the particle at that point. The independent coordinate will be "s", the pathlength along the RT.

The same state vector will be used, but different Kalman matrices will be defined depending upon which detector system the hit came from.

For the CDC, the measurement vector will consist of a single value: {r}. One could consider the wire position a measurement as well, but this would only complicate the problem unecessarily. We assume we know the wire position precisely and so can calculate the trajectory's distance from it precisely for the given state vector. So, to convert the state vector into a measurement value for a particular wire, the particle is just swum until its distance from the wire increases. Then the distance can be estimated. We'll call this distance the SVTDOCA for State Vector Trajectory Distance Of Closest Approach. Here is where things get more complicated. The "measurement" needs to correspond to a particular point along the independant variable. In our case, the independant variable is the distance "s" along the RT. We thus, need to convert the SVTDOCA to the coordinate system defined by a point on the RT. In other words, we have to translate a 3-D point in space(the SVTDOCA point) into an s-value on the RT (i.e. where y=0 in the RT reference frame). The problem is that there may be more than one s value for which the point would fall in the y=0 plane of the RT. Actually, it may not be such a problem. In principle, it doesn't matter at what value of s we choose just so long as the SVTDOCA point is in the y=0 plane.

We are required to use the Extended Kalman Filter because of the non-linear nature of particle trajectories through magnetic fields. Also, because of the inhomogenaity of our field coupled with the non-uniform material the trajectories pass through, we can't use analytic derivatives and are forced to rely on numerical ones. This will take more CPU time, but will make the code a little easier to write. To calculate derivatives, the state vector parameters will be tweaked slightly and the particle re-swum so that a difference of the final state vector and the one swum without tweaking can be made.

So, for the CDC, we will use the distance of closest approach of the SVTDOCA point to the reference trajectory to define s for the measurement. As the particle is re-swum while calculating derivatives, it will be projected up to the y=0 plane of this same RT point so that all state vectors will correspond to the same s-value. Hit-based tracking would correspond to setting the measured value of r to zero for all hits.


The FDC is somewhat different in the information it gives and so in some ways must be handled differently. It is tempting to think of the FDC as giving well defined z-coordinate information and so we should use the known z-positions of the chamber planes to define the Kalman measurement points. In reality though, the drift time measurements come from the DOCA which is virtually never precisely in the wire plane. Thus, the distance from the wire must be treated in the same way as for the CDC. In addition to the drift time information (which only tells distance from the wire), the FDC provides a measurement of distance along the wire. So, for the purposes of the Kalman Filter, the FDC provides two measurements: {r, w} where "r" is the DOCA of the track to the wire and "w" is the coordinate of the DOCA point in the wire direction.


