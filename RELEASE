Release Notes for Hall-D source code
------------------------------------

    URL: https://halldsvn.jlab.org/repos/tags/release-2010-02-11
   Date: February 12, 2010
Builder: Mark Ito <marki@jlab.org>

This release is based on revision 6015 of trunk/src.

This release has been compiled on the following systems
with the specified versions:

Fedora release 8 (Werewolf) on i686  32-bit
------------
  Xerces 2.7.0
  JANA 0.5.2
  ROOT 5.18-00
  cernlib 2005
  gcc/g++/gfortran :  4.1.2 20070925 (Red Hat 4.1.2-33)
  HDDS 1.0

Red Hat Enterprise Linux 5.3
-----------
  Xerces 2.7.0
  JANA 0.5.2
  ROOT 5.18-00
  cernlib 2005
  gcc/g++/gfortran :  4.1.2 20080704 (Red Hat 4.1.2-46)
  HDDS 1.0

CentOS release 5.3 (Final)
------------
  Xerces 2.7.0
  JANA 0.5.2
  ROOT 5.24
  cernlib 2005
  gcc/g++/gfortran :  4.1.2 20080704 (Red Hat 4.1.2-44)
  HDDS 1.0

Relevant repository log of changes:
------------------------------------------------------------------------
r5949 | staylor | 2010-01-21 18:33:45 -0500 (Thu, 21 Jan 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackFitterKalman.cc
   M /trunk/src/libraries/TRACKING/DTrackFitterKalman.h

Implement alternate formula for multiple scattering due to Lynch and Dahl.
------------------------------------------------------------------------
r5950 | kornicer | 2010-01-22 02:31:01 -0500 (Fri, 22 Jan 2010) | 2 lines
Changed paths:
   M /trunk/src/libraries/BCAL/DBCALPhoton_factory.cc

BCALPhoton factory: previously uploaded version with wrong energy calibration, fixed.  

------------------------------------------------------------------------
r5967 | staylor | 2010-01-27 14:50:27 -0500 (Wed, 27 Jan 2010) | 1 line
Changed paths:
   M /trunk/src/programs/Simulation/mcsmear/smear.cc

Assume that the default mode of the HDGeant simulation is to have energy loss turned on, so the FDC_ELOSS_OFF flag needs to be false unless explicitly changed to true with the -e command line flag.
------------------------------------------------------------------------
r5970 | staylor | 2010-01-29 08:10:28 -0500 (Fri, 29 Jan 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackFitterKalman.cc

(1) implement non-constant variance for cdc hits based on curve from Yves/David.  (2) Make D a signed quantity in ConvertStateVector.
------------------------------------------------------------------------
r5979 | marki | 2010-02-02 14:14:33 -0500 (Tue, 02 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/programs/Utilities/hddm
   M /trunk/src/programs/Utilities/hddm/Makefile

merge in changes from branch branches/src/programs/Utilities/hddm_multi-platforms
------------------------------------------------------------------------
r5980 | marki | 2010-02-03 11:23:34 -0500 (Wed, 03 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/programs/Utilities/hddm/Makefile

add mkdirs target as prerequisite for install
------------------------------------------------------------------------
r5987 | marki | 2010-02-04 14:50:51 -0500 (Thu, 04 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/external/xstream/src
   M /trunk/src/external/xstream/src/Makefile

merge in changes from branch branches/src/external/xstream/src-multi-plaforms (note typo in dir name)
------------------------------------------------------------------------
r5988 | marki | 2010-02-04 15:00:19 -0500 (Thu, 04 Feb 2010) | 3 lines
Changed paths:
   M /trunk/src/programs/Utilities/hddm/Makefile

Get rid of search in src directory for xstream library, now should
appear in standard location, $HALLD_HOME/lib/$BMS_OSNAME.

------------------------------------------------------------------------
r5989 | staylor | 2010-02-04 17:24:52 -0500 (Thu, 04 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackFitter.cc
   M /trunk/src/libraries/TRACKING/DTrackFitter.h

Added routine to return simple estimate for the variance in the energy loss per unit length.  Fixed the GetdEdx routine that returns the most probable dEdx such that it returns the value in MeV/cm.
------------------------------------------------------------------------
r5990 | davidl | 2010-02-08 10:00:58 -0500 (Mon, 08 Feb 2010) | 4 lines
Changed paths:
   M /trunk/src/BMS/Makefile.shlib

- Added -fPIC to compile command for files that will be linked into plugins. This addresses the relocatable text segment issue with SELinux

- Explicitly remove JANA from the ADDITIONAL_MODULES variable so that libJANA.a is not linked into plugins. This addresses the problem where programs seg. fault and crash when a plugin is closed on Linux. I believe it has to do with global varaibles in the JANA library that are included from both the plugin and executable.

------------------------------------------------------------------------
r5991 | davidl | 2010-02-08 13:26:58 -0500 (Mon, 08 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/HDGEOMETRY/DMaterialMap.cc
   M /trunk/src/libraries/HDGEOMETRY/DRootGeom.cc
   M /trunk/src/libraries/TRACKING/DTrackCandidate_factory_CDC.cc
   M /trunk/src/libraries/TRACKING/DTrackHitSelectorTHROWN.cc

Fixing things that cause compiler warnings
------------------------------------------------------------------------
r5992 | davidl | 2010-02-08 13:39:35 -0500 (Mon, 08 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/programs/Analysis/hdview2/hdv_mainframe.cc
   M /trunk/src/programs/Analysis/hdview2/trk_mainframe.cc

Fixed several lines that were causing compiler warnings.
------------------------------------------------------------------------
r5993 | marki | 2010-02-09 08:24:43 -0500 (Tue, 09 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/external/xstream/src/Makefile

drop OSNAME, use local versions of xstream headers
------------------------------------------------------------------------
r5994 | marki | 2010-02-09 08:26:23 -0500 (Tue, 09 Feb 2010) | 1 line
Changed paths:
   D /trunk/src/include/xstream.h

use version in src/external/xstream/include
------------------------------------------------------------------------
r5995 | marki | 2010-02-09 08:26:47 -0500 (Tue, 09 Feb 2010) | 1 line
Changed paths:
   D /trunk/src/include/xstream

use version in src/external/xstream/include
------------------------------------------------------------------------
r5996 | davidl | 2010-02-09 08:36:01 -0500 (Tue, 09 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/BMS/Makefile.bin
   M /trunk/src/BMS/Makefile.lib
   M /trunk/src/BMS/Makefile.shlib

Filter out -fno-automatic from FFLAGS when passing them to the preprocessor to avoid warnings
------------------------------------------------------------------------
r5998 | marki | 2010-02-10 14:14:34 -0500 (Wed, 10 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/external/xstream/src/Makefile

default to HALLD_HOME if HALLD_MY is not defined
------------------------------------------------------------------------
r5999 | staylor | 2010-02-11 09:55:04 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/PID/DKinematicData.cc
   M /trunk/src/libraries/PID/DKinematicData.h

For diagnostic purposes, allow for an alternate set of tracking parameters (the forward parameterization in the Kalman filter) with the use of new flag so that the existing TrackingErrorMatrix can be used to study the pulls for the alternate parameter set.  By default m_use_forward_parameters is set to false.
------------------------------------------------------------------------
r6000 | staylor | 2010-02-11 11:24:34 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackFitter.cc
   M /trunk/src/libraries/TRACKING/DTrackFitter.h

Move calculation of density effect into its own method.  For consistency try to make sure that the units of dEdx are MeV/cm everywhere.
------------------------------------------------------------------------
r6001 | staylor | 2010-02-11 11:28:49 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackTimeBased_factory_Kalman.cc
   M /trunk/src/libraries/TRACKING/DTrackTimeBased_factory_Kalman.h

Add code to routine matching track with start counter.   Revamped FOM (for now) to add chi-squared contributions from the tracking, dEdx, and time-of-flight and use TMath::Prob to convert to a confidence level. This is still very much a work in progress.
------------------------------------------------------------------------
r6002 | staylor | 2010-02-11 11:31:48 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackTimeBased_factory.cc

update to be consistent with recent changes to other parts of the tracking code.  Still needs further updates to be consistent with DTrackTimeBased_factory_Kalman.cc
------------------------------------------------------------------------
r6003 | staylor | 2010-02-11 11:32:17 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackTimeBased_factory.h

update to be consistent with recent changes to other parts of the tracking code.  Still needs further updates to be consistent with DTrackTimeBased_factory_Kalman.cc
------------------------------------------------------------------------
r6004 | staylor | 2010-02-11 11:39:34 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/libraries/TRACKING/DTrackFitterKalman.cc
   M /trunk/src/libraries/TRACKING/DTrackFitterKalman.h

Move B-field and gradient components to the private data area of the object, thereby eliminating some places where some DVector3's were created and passed around.  Allow for different step sizes for the wire-based and time-based passes. Put the forward-parameter covariance matrix into the DKinematicData TrackErrorMatrix and set the forward-parameter flag if the forward covariance matrix exists.  The downside is that meaning of the TrackErrorMatrix entries is now context-dependent... so this approach may need to be reconsidered in the future.
------------------------------------------------------------------------
r6005 | marki | 2010-02-11 13:08:07 -0500 (Thu, 11 Feb 2010) | 1 line
Changed paths:
   M /trunk/src/programs/Analysis/plugins/trkfitterLSLM/DTrackLSFitter.cc

change DTrack.h to DTrackWireBased.h
------------------------------------------------------------------------
